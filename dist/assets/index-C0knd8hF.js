(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();class a{constructor(){this.cityInput=document.getElementById("cityInput"),this.searchBtn=document.getElementById("searchBtn"),this.errorMessage=document.getElementById("errorMessage"),this.loadingSpinner=document.getElementById("loadingSpinner"),this.resultsContainer=document.getElementById("resultsContainer"),this.cityName=document.getElementById("cityName"),this.weatherDescription=document.getElementById("weatherDescription"),this.temperature=document.getElementById("temperature"),this.weatherIcon=document.getElementById("weatherIcon"),this.feelsLike=document.getElementById("feelsLike"),this.humidity=document.getElementById("humidity"),this.windSpeed=document.getElementById("windSpeed"),this.musicContainer=document.getElementById("musicContainer"),this.initEventListeners()}initEventListeners(){this.searchBtn.addEventListener("click",()=>this.handleSearch()),this.cityInput.addEventListener("keypress",t=>{t.key==="Enter"&&this.handleSearch()}),document.querySelectorAll(".city-btn").forEach(t=>{t.addEventListener("click",n=>{const s=n.target.getAttribute("data-city");this.cityInput.value=s,this.handleSearch()})})}async handleSearch(){const t=this.cityInput.value.trim();if(this.clearResults(),!t){this.showError("Please enter a city name.");return}this.showLoading();try{const n=await this.fetchWeatherData(t);this.displayWeather(n),this.showResults()}catch(n){this.showError(n.message)}finally{this.hideLoading()}}async fetchWeatherData(t){const s=`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(t)}&appid=d424c92b6665591d149f1493bf8d4ecd&units=metric`;console.log("Weather API URL:",s);try{const e=await fetch(s);if(console.log("Weather API Response Status:",e.status),!e.ok){const o=await e.text();throw console.log("Weather API Error Response:",o),e.status===404?new Error("City not found. Please check the spelling and try again."):e.status===401?new Error(`Invalid API key. Please check your OpenWeatherMap API key. Response: ${o}`):new Error(`Unable to fetch weather data. Status: ${e.status}. Response: ${o}`)}const i=await e.json();return console.log("Weather API Success:",i),i}catch(e){throw console.error("Weather API Error:",e),e.message.includes("fetch")?new Error("Network error. Please check your internet connection."):e}}displayWeather(t){this.cityName.textContent=t.name,this.weatherDescription.textContent=t.weather[0].description,this.temperature.textContent=`${Math.round(t.main.temp)}°C`,this.feelsLike.textContent=`${Math.round(t.main.feels_like)}°C`,this.humidity.textContent=`${t.main.humidity}%`,this.windSpeed.textContent=`${Math.round(t.wind.speed*3.6)} km/h`,this.updateWeatherIcon(t.weather[0].main,t.weather[0].icon),this.displayMusicRecommendations(t.weather[0].main,t.main.temp)}displayMusicRecommendations(t,n){this.musicContainer.innerHTML="",this.getMusicForWeather(t,n).forEach(e=>{const i=document.createElement("div");i.className="music-article",i.innerHTML=`
        <h3>${e.title}</h3>
        <p>${e.description}</p>
        <div class="music-meta">
          <span class="music-genre">${e.genre}</span>
          <span class="music-mood">${e.mood}</span>
        </div>
      `,this.musicContainer.appendChild(i)})}getMusicForWeather(t,n){const s=[];switch(t){case"Clear":n>25?s.push({title:"Summer Vibes Playlist",description:"Perfect sunny day calls for upbeat tracks! Try some reggae, pop, or tropical house to match the bright weather.",genre:"Pop/Reggae",mood:"Energetic & Happy"}):s.push({title:"Clear Skies Acoustic",description:"Beautiful clear weather with a gentle breeze. Acoustic folk and indie tracks would complement this peaceful atmosphere.",genre:"Folk/Indie",mood:"Peaceful & Uplifting"});break;case"Rain":case"Drizzle":s.push({title:"Rainy Day Jazz",description:"Nothing beats smooth jazz or lo-fi hip hop when it's raining. Perfect for a cozy indoor vibe.",genre:"Jazz/Lo-fi",mood:"Cozy & Contemplative"});break;case"Thunderstorm":s.push({title:"Storm Energy",description:"Dramatic weather calls for dramatic music! Try some epic orchestral pieces or powerful rock anthems.",genre:"Rock/Orchestral",mood:"Intense & Dramatic"});break;case"Snow":s.push({title:"Winter Wonderland",description:"Snowy weather pairs beautifully with classical music, ambient soundscapes, or cozy indie folk.",genre:"Classical/Ambient",mood:"Serene & Magical"});break;case"Clouds":s.push({title:"Cloudy Day Chill",description:"Overcast skies are perfect for mellow indie rock, alternative, or downtempo electronic music.",genre:"Indie/Alternative",mood:"Mellow & Reflective"});break;default:s.push({title:"Weather Mood Mix",description:"A versatile playlist that works for any weather - featuring a mix of genres to suit your current atmosphere.",genre:"Mixed",mood:"Versatile"})}n>30?s.push({title:"Hot Summer Beats",description:"It's getting hot! Cool down with some chill electronic, bossa nova, or smooth R&B tracks.",genre:"Electronic/R&B",mood:"Cool & Smooth"}):n<0&&s.push({title:"Warm Winter Sounds",description:"Bundle up with some warm, comforting music. Think cozy coffee shop vibes or heartwarming ballads.",genre:"Acoustic/Ballads",mood:"Warm & Comforting"});const e=new Date().getHours();return e<12?s.push({title:"Morning Energy Boost",description:"Start your day right with some uplifting morning tunes that match today's weather vibe!",genre:"Upbeat/Motivational",mood:"Energizing"}):e>18&&s.push({title:"Evening Wind Down",description:"As the day winds down, let the weather inspire your evening soundtrack with these relaxing suggestions.",genre:"Chill/Relaxing",mood:"Calming"}),s.slice(0,3)}updateWeatherIcon(t,n){const s={Clear:"fas fa-sun",Clouds:"fas fa-cloud",Rain:"fas fa-cloud-rain",Drizzle:"fas fa-cloud-drizzle",Thunderstorm:"fas fa-bolt",Snow:"fas fa-snowflake",Mist:"fas fa-smog",Fog:"fas fa-smog"},e={"01d":"fas fa-sun","01n":"fas fa-moon","02d":"fas fa-cloud-sun","02n":"fas fa-cloud-moon","03d":"fas fa-cloud","03n":"fas fa-cloud","04d":"fas fa-cloud","04n":"fas fa-cloud","09d":"fas fa-cloud-rain","09n":"fas fa-cloud-rain","10d":"fas fa-cloud-sun-rain","10n":"fas fa-cloud-moon-rain","11d":"fas fa-bolt","11n":"fas fa-bolt","13d":"fas fa-snowflake","13n":"fas fa-snowflake","50d":"fas fa-smog","50n":"fas fa-smog"};this.weatherIcon.className=e[n]||s[t]||"fas fa-sun"}showError(t){this.errorMessage.textContent=t,this.errorMessage.classList.remove("hidden")}showLoading(){this.loadingSpinner.classList.remove("hidden")}hideLoading(){this.loadingSpinner.classList.add("hidden")}showResults(){this.resultsContainer.classList.remove("hidden")}clearResults(){this.errorMessage.classList.add("hidden"),this.resultsContainer.classList.add("hidden")}}document.addEventListener("DOMContentLoaded",()=>{new a});
